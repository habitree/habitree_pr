# 사용자 스토리 명세서: Readtree 독서플랫폼

**문서 버전**: 2.0  
**작성일**: 2025년 12월  
**제품명**: Readtree 독서플랫폼 (Readtree by Habitree)  
**참조 문서**: PRD- Readtree 독서플랫폼.md, 신버전-기능명세서.md

---

## 문서 개요

이 문서는 Readtree 독서플랫폼의 기능 요구사항을 사용자 스토리(User Story) 형식으로 정리한 명세서입니다. 각 사용자 스토리는 다음 형식을 따릅니다:

- **As a** [사용자 유형]
- **I want** [원하는 기능/행동]
- **So that** [이유/가치]

각 스토리는 우선순위, 수용 기준(Acceptance Criteria), 그리고 상세 시나리오를 포함합니다.

---

## 1. 사용자 인증 및 계정 관리

### US-001: 카카오 소셜 로그인

**As a** 새로운 사용자  
**I want** 카카오 계정으로 간편하게 로그인하고 싶다  
**So that** 별도의 회원가입 과정 없이 빠르게 서비스를 시작할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Supabase Auth의 OAuth Provider 사용
- 카카오 개발자 콘솔에서 OAuth 앱 등록
- Redirect URL: `https://{project-url}/auth/callback`

**수용 기준**:
- 카카오 로그인 버튼 클릭 시 Supabase Auth의 `signInWithOAuth()` 호출
- 카카오 인증 페이지로 리다이렉트
- 인증 완료 후 콜백 URL로 리다이렉트
- Supabase가 자동으로 사용자 정보 저장
- `users` 테이블에 프로필 정보 저장 (트리거 또는 API Route)
- 메인 페이지로 자동 이동
- 로그인 실패 시 명확한 에러 메시지 표시

**상세 시나리오**:
```
Given 사용자가 랜딩 페이지에 접속했을 때
When "카카오 로그인" 버튼을 클릭하면
Then Supabase Auth의 signInWithOAuth()가 호출되고
When 카카오 인증 페이지에서 인증을 완료하면
Then 콜백 URL로 리다이렉트되고
When Supabase가 사용자 정보를 저장하면
Then users 테이블에 프로필 정보가 저장되고 메인 대시보드로 이동한다
```

---

### US-002: 구글 소셜 로그인

**As a** 새로운 사용자  
**I want** 구글 계정으로 간편하게 로그인하고 싶다  
**So that** 별도의 회원가입 과정 없이 빠르게 서비스를 시작할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Supabase Auth의 Google OAuth Provider 사용
- Google Cloud Console에서 OAuth 클라이언트 ID 생성
- Redirect URL: `https://{project-url}/auth/callback`

**수용 기준**:
- 구글 로그인 버튼 클릭 시 Supabase Auth의 `signInWithOAuth({ provider: 'google' })` 호출
- 구글 인증 페이지로 리다이렉트
- 인증 완료 후 콜백 URL로 리다이렉트
- Supabase가 자동으로 사용자 정보 저장
- `users` 테이블에 프로필 정보 저장
- 메인 페이지로 자동 이동
- 로그인 실패 시 명확한 에러 메시지 표시

**상세 시나리오**:
```
Given 사용자가 랜딩 페이지에 접속했을 때
When "구글 로그인" 버튼을 클릭하면
Then Supabase Auth의 signInWithOAuth({ provider: 'google' })가 호출되고
When 구글 인증 페이지에서 인증을 완료하면
Then 콜백 URL로 리다이렉트되고
When Supabase가 사용자 정보를 저장하면
Then users 테이블에 프로필 정보가 저장되고 메인 대시보드로 이동한다
```

---

### US-003: 이메일/비밀번호 로그인

**As a** 기존 사용자  
**I want** 이메일과 비밀번호로 로그인하고 싶다  
**So that** 소셜 계정 없이도 서비스를 이용할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 이메일 주소와 비밀번호 입력 (이메일 형식 검증, 비밀번호 최소 6자)
- Supabase Auth의 `signInWithPassword()` 호출
- 인증 성공 시 사용자 정보 로드 및 로그인 상태 업데이트
- 로그인 성공 시 메인 페이지로 이동
- 잘못된 이메일/비밀번호 시: "이메일 또는 비밀번호가 올바르지 않습니다"
- 이메일 미인증 시: "이메일 인증이 필요합니다"
- 네트워크 오류 시: "네트워크 오류가 발생했습니다"

**상세 시나리오**:
```
Given 사용자가 로그인 페이지에 있을 때
When 이메일과 비밀번호를 입력하고 로그인 버튼을 클릭하면
Then Supabase Auth의 signInWithPassword()가 호출되고
When 인증이 성공하면
Then 사용자 정보가 로드되고 메인 페이지로 이동한다
```

---

### US-004: 회원가입

**As a** 새로운 사용자  
**I want** 이메일과 비밀번호로 회원가입하고 싶다  
**So that** 서비스를 이용할 수 있는 계정을 만들 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 이메일 주소 입력 (이메일 형식 검증, 중복 확인)
- 비밀번호 입력 (최소 6자)
- 비밀번호 확인 (비밀번호와 일치 확인)
- 닉네임 입력 (선택)
- 약관 동의 (필수)
- Supabase Auth의 `signUp()` 호출
- 이메일 인증 메일 자동 발송
- `users` 테이블에 프로필 정보 저장 (Database Trigger 또는 API Route)
- 회원가입 성공 메시지 표시
- 이메일 인증 안내 메시지 표시

**에러 처리**:
- 이메일 중복: "이미 사용 중인 이메일입니다"
- 약관 미동의: "약관에 동의해주세요"
- 비밀번호 불일치: "비밀번호가 일치하지 않습니다"

**상세 시나리오**:
```
Given 사용자가 회원가입 페이지에 있을 때
When 이메일, 비밀번호, 닉네임을 입력하고 약관에 동의한 후 가입 버튼을 클릭하면
Then Supabase Auth의 signUp()이 호출되고
When 회원가입이 성공하면
Then 이메일 인증 메일이 발송되고 users 테이블에 프로필 정보가 저장된다
```

---

### US-005: 비밀번호 재설정

**As a** 비밀번호를 잊은 사용자  
**I want** 이메일로 비밀번호 재설정 링크를 받고 싶다  
**So that** 비밀번호를 다시 설정할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 이메일 주소 입력
- Supabase Auth의 `resetPasswordForEmail()` 호출
- Supabase가 자동으로 재설정 링크 생성 및 이메일 발송
- 이메일 발송 완료 메시지 표시
- 링크 클릭 시 비밀번호 변경 페이지로 이동
- 새 비밀번호 입력 및 확인
- Supabase Auth의 `updateUser()` 호출하여 비밀번호 변경
- 비밀번호 변경 완료 메시지 표시

**에러 처리**:
- 존재하지 않는 이메일: "등록되지 않은 이메일입니다"
- 링크 만료: "링크가 만료되었습니다"

**상세 시나리오**:
```
Given 사용자가 비밀번호 재설정 페이지에 있을 때
When 이메일 주소를 입력하고 재설정 버튼을 클릭하면
Then Supabase Auth의 resetPasswordForEmail()이 호출되고
When 이메일이 발송되면
Then 재설정 링크가 포함된 이메일이 발송된다
When 사용자가 링크를 클릭하면
Then 비밀번호 변경 페이지로 이동하고
When 새 비밀번호를 입력하고 변경하면
Then 비밀번호가 성공적으로 변경된다
```

---

### US-006: 프로필 조회

**As a** 로그인한 사용자  
**I want** 내 프로필 정보를 확인하고 싶다  
**So that** 내 계정 정보를 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- Supabase Auth에서 이메일, 프로필 이미지 조회
- PostgreSQL `users` 테이블에서 추가 정보 조회
- 닉네임, 이메일, 프로필 이미지, 가입일, 마지막 로그인 시간 표시
- 본인만 조회 가능

**상세 시나리오**:
```
Given 사용자가 로그인되어 있을 때
When 프로필 페이지에 접속하면
Then Supabase Auth와 users 테이블에서 프로필 정보를 조회하고
When 조회가 완료되면
Then 프로필 정보가 표시된다
```

---

### US-007: 프로필 수정

**As a** 로그인한 사용자  
**I want** 내 프로필 정보를 수정하고 싶다  
**So that** 닉네임이나 프로필 이미지를 변경할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 닉네임 수정 (최대 20자)
- 프로필 이미지 업로드 (선택)
- Supabase Storage의 `avatars/{userId}` 버킷에 업로드
- 업로드된 이미지 URL 획득
- PostgreSQL `users` 테이블 업데이트
- 변경사항 즉시 반영
- 수정 완료 메시지 표시

**에러 처리**:
- 이미지 업로드 실패: "이미지 업로드에 실패했습니다"
- 네트워크 오류: "네트워크 오류가 발생했습니다"

**상세 시나리오**:
```
Given 사용자가 프로필 페이지에 있을 때
When 닉네임을 수정하고 프로필 이미지를 업로드한 후 저장 버튼을 클릭하면
Then Supabase Storage에 이미지가 업로드되고
When 업로드가 완료되면
Then users 테이블이 업데이트되고 변경사항이 즉시 반영된다
```

---

### US-008: 로그아웃

**As a** 로그인한 사용자  
**I want** 로그아웃하고 싶다  
**So that** 계정을 안전하게 종료할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- Supabase Auth의 `signOut()` 호출
- 로컬 스토리지 데이터 삭제
- 로그인 페이지로 리다이렉트
- 로그아웃 완료 메시지 표시

**상세 시나리오**:
```
Given 사용자가 로그인되어 있을 때
When 로그아웃 버튼을 클릭하면
Then Supabase Auth의 signOut()이 호출되고
When 로그아웃이 완료되면
Then 로컬 스토리지 데이터가 삭제되고 로그인 페이지로 이동한다
```

---

## 2. 책 검색 및 등록

### US-009: ISBN으로 책 검색

**As a** 독서 기록을 남기고 싶은 사용자  
**I want** ISBN 번호로 책을 검색하고 싶다  
**So that** 책 정보를 자동으로 입력받아 수동 입력 시간을 절약할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/books/search`
- 외부 책 정보 API 호출 (네이버 도서 API 또는 알라딘 API)

**수용 기준**:
- ISBN 번호 입력 (10자리 또는 13자리)
- Next.js API Route 호출
- 외부 책 정보 API 호출
- 검색 결과 파싱
- 책 제목, 저자, 출판사, 출판일, 표지 이미지, ISBN, 책 소개 표시
- 검색 응답 시간 3초 이내

**에러 처리**:
- 잘못된 ISBN: "올바른 ISBN 번호를 입력해주세요"
- 검색 결과 없음: "검색 결과가 없습니다"
- API 오류: "검색 중 오류가 발생했습니다"

**상세 시나리오**:
```
Given 사용자가 책 추가 화면에 있을 때
When ISBN 번호를 입력하고 검색 버튼을 클릭하면
Then Next.js API Route가 호출되고
When 외부 책 정보 API에서 책 정보를 조회하면
Then 책 정보가 자동으로 입력된 상태로 표시된다
```

---

### US-010: 제목/저자로 책 검색

**As a** 독서 기록을 남기고 싶은 사용자  
**I want** 책 제목이나 저자명으로 책을 검색하고 싶다  
**So that** ISBN을 모르더라도 쉽게 책을 찾아서 추가할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/books/search`
- Query 파라미터: `q` (검색어), `type` (제목/저자)

**수용 기준**:
- 검색 키워드 입력 (최소 1자)
- Next.js API Route 호출
- 외부 책 정보 API 호출
- 검색 결과 목록 표시 (최대 100개)
- 각 결과: 제목, 저자, 출판사, 표지 이미지
- 정렬 옵션: 정확도순 (기본), 출판일순, 판매량순
- 페이지네이션 처리
- 검색 응답 시간 3초 이내

**상세 시나리오**:
```
Given 사용자가 책 추가 화면에 있을 때
When 책 제목 또는 저자명을 입력하고 검색 버튼을 클릭하면
Then Next.js API Route가 호출되고
When 외부 책 정보 API에서 검색어와 일치하는 책 목록을 조회하면
Then 검색 결과 목록이 표시되고
When 원하는 책을 선택하면
Then 책 정보가 자동으로 입력된 상태로 표시된다
```

---

### US-011: 검색 결과에서 책 등록

**As a** 독서 기록을 남기고 싶은 사용자  
**I want** 검색 결과에서 선택한 책을 내 책 목록에 등록하고 싶다  
**So that** 읽고 있는 책을 관리할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/books` (POST)
- PostgreSQL `books` 테이블에 책 정보 저장 (중복 체크)
- PostgreSQL `user_books` 테이블에 사용자-책 관계 저장

**수용 기준**:
- 검색 결과에서 책 선택
- 책 정보 자동 입력
- 독서 상태 선택 (필수): `want_to_read`, `reading`, `completed`
- 읽기 시작일 입력 (선택)
- 읽기 완료일 입력 (선택)
- 별점 입력 (선택, 1-5점)
- 읽는 이유 입력 (선택)
- 상세 소개 입력 (선택)
- `books` 테이블에 책 정보 저장 (ISBN이 없으면 생성, 있으면 기존 책 사용)
- `user_books` 테이블에 사용자-책 관계 저장
- 등록 완료 메시지 표시
- 내 책 목록에 추가됨

**에러 처리**:
- 중복 등록: "이미 등록된 책입니다"
- 저장 실패: "책 등록에 실패했습니다"

**상세 시나리오**:
```
Given 사용자가 검색 결과에서 책을 선택했을 때
When 독서 상태와 추가 정보를 입력하고 등록 버튼을 클릭하면
Then books 테이블에 책 정보가 저장되고
When 저장이 완료되면
Then user_books 테이블에 사용자-책 관계가 저장되고 등록 완료 메시지가 표시된다
```

---

### US-012: 수동 책 등록

**As a** 독서 기록을 남기고 싶은 사용자  
**I want** 검색 없이 직접 책 정보를 입력하여 등록하고 싶다  
**So that** 검색되지 않는 책도 등록할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 책 제목 입력 (필수)
- 저자 입력 (필수)
- 출판사 입력 (선택)
- ISBN 입력 (선택)
- 책 표지 이미지 업로드 (선택)
- 독서 상태 선택 (필수)
- 읽기 시작일 입력 (선택)
- 읽기 완료일 입력 (선택)
- 별점 입력 (선택)
- 읽는 이유 입력 (선택)
- 상세 소개 입력 (선택)
- Supabase Storage의 `book-covers` 버킷에 이미지 업로드 (선택)
- PostgreSQL에 저장 (`books` 테이블, `user_books` 테이블)
- 등록 완료 메시지 표시

**상세 시나리오**:
```
Given 사용자가 책 추가 화면에 있을 때
When 책 정보를 직접 입력하고 등록 버튼을 클릭하면
Then books 테이블에 책 정보가 저장되고
When 저장이 완료되면
Then user_books 테이블에 사용자-책 관계가 저장되고 등록 완료 메시지가 표시된다
```

---

### US-013: 책 정보 수정

**As a** 책을 등록한 사용자  
**I want** 등록된 책의 정보를 수정하고 싶다  
**So that** 독서 상태나 평가를 업데이트할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/books/[id]` (PUT)
- PostgreSQL `user_books` 테이블 업데이트

**수용 기준**:
- 책 정보 수정 모달 열기
- 독서 상태, 시작일, 완료일, 별점, 읽는 이유, 상세 소개 수정 가능
- PostgreSQL 업데이트
- 변경사항 즉시 반영
- 수정 완료 메시지 표시
- 본인이 등록한 책만 수정 가능

**상세 시나리오**:
```
Given 사용자가 책 상세 페이지에 있을 때
When 수정 버튼을 클릭하고 정보를 수정한 후 저장 버튼을 클릭하면
Then PostgreSQL user_books 테이블이 업데이트되고
When 업데이트가 완료되면
Then 변경사항이 즉시 반영되고 수정 완료 메시지가 표시된다
```

---

### US-014: 책 삭제

**As a** 책을 등록한 사용자  
**I want** 등록된 책을 삭제하고 싶다  
**So that** 더 이상 읽지 않는 책을 목록에서 제거할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/books/[id]` (DELETE)
- PostgreSQL `user_books` 테이블에서 삭제
- 관련 노트는 유지 (선택적으로 삭제 가능)

**수용 기준**:
- 삭제 확인 다이얼로그 표시
- 확인 시 PostgreSQL에서 삭제
- 관련 노트는 유지 (사용자 선택에 따라 삭제 가능)
- 삭제 완료 메시지 표시
- 본인이 등록한 책만 삭제 가능

**상세 시나리오**:
```
Given 사용자가 책 상세 페이지에 있을 때
When 삭제 버튼을 클릭하고 확인 다이얼로그에서 확인을 클릭하면
Then PostgreSQL user_books 테이블에서 삭제되고
When 삭제가 완료되면
Then 삭제 완료 메시지가 표시되고 책 목록에서 제거된다
```

---

## 3. 필사/사진/메모 관리 (노트 관리)

### US-015: 필사 직접 입력

**As a** 책을 읽는 독자  
**I want** 인상 깊은 문장을 직접 입력하여 필사하고 싶다  
**So that** 나중에 다시 찾아볼 수 있도록 기록할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes` (POST)
- PostgreSQL `notes` 테이블에 저장
- 타입: `quote`

**수용 기준**:
- 필사 내용 입력 (필수)
- 책 선택 (필수, 등록된 책 중 선택)
- 페이지 번호 입력 (선택)
- 태그 추가 (선택, 여러 개 가능)
- 공개 여부 선택 (선택, 기본값: false)
- PostgreSQL에 저장
- 등록 완료 메시지 표시
- 노트 목록에 추가됨
- 기록 저장 시간 5초 이내

**상세 시나리오**:
```
Given 사용자가 책 상세 페이지에 있을 때
When "필사 추가" 버튼을 클릭하고 문장을 입력한 후 저장 버튼을 클릭하면
Then PostgreSQL notes 테이블에 저장되고
When 저장이 완료되면
Then 등록 완료 메시지가 표시되고 노트 목록에 추가된다
```

---

### US-016: 이미지 업로드 및 OCR

**As a** 책을 읽는 독자  
**I want** 책 페이지 이미지를 업로드하고 OCR로 텍스트를 추출하고 싶다  
**So that** 손으로 쓴 필사나 책 페이지 사진도 텍스트로 저장하고 검색할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/ocr` (POST)
- Supabase Storage에 이미지 업로드
- OCR API 호출 (Google Cloud Vision API 또는 Tesseract)
- PostgreSQL `notes` 테이블에 저장
- 타입: `quote` 또는 `photo`

**수용 기준**:
- 이미지 파일 선택 (jpg, png, 최대 10MB)
- 책 선택 (필수)
- 페이지 번호 입력 (선택)
- Supabase Storage의 `notes/{userId}/{noteId}` 버킷에 업로드
- Next.js API Route에서 OCR API 호출
- Google Cloud Vision API 또는 Tesseract로 텍스트 추출
- 추출된 텍스트 표시 및 편집 가능
- 사용자가 텍스트 확인 및 수정
- PostgreSQL에 저장 (이미지 URL, 추출된 텍스트)
- OCR 정확도 90% 이상
- 기록 저장 시간 5초 이내

**에러 처리**:
- 파일 크기 초과: "파일 크기는 10MB 이하여야 합니다"
- 지원하지 않는 형식: "jpg, png 파일만 업로드 가능합니다"
- OCR 실패: "텍스트 추출에 실패했습니다. 다시 시도해주세요"

**상세 시나리오**:
```
Given 사용자가 필사 입력 화면에 있을 때
When "이미지 업로드" 버튼을 클릭하고 필사 이미지를 선택하면
Then Supabase Storage에 이미지가 업로드되고
When 업로드가 완료되면
Then OCR API가 이미지에서 텍스트를 추출하고
When 추출이 완료되면
Then 추출된 텍스트가 표시되고 사용자가 수정 후 저장할 수 있다
```

---

### US-017: 책 페이지 사진 업로드

**As a** 책을 읽는 독자  
**I want** 책 페이지를 사진으로 촬영하여 저장하고 싶다  
**So that** 나중에 다시 보고 싶은 페이지를 빠르게 기록할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes` (POST)
- Supabase Storage에 이미지 업로드
- PostgreSQL `notes` 테이블에 저장
- 타입: `photo`

**수용 기준**:
- 카메라로 책 페이지 촬영 또는 갤러리에서 선택
- 책 선택 (필수)
- 페이지 번호 입력 (선택)
- Supabase Storage에 업로드
- PostgreSQL에 저장
- 해당 책의 노트로 자동 연결
- 업로드 완료 메시지 표시
- 노트 목록에 추가됨

**상세 시나리오**:
```
Given 사용자가 책 상세 페이지에 있을 때
When "사진 추가" 버튼을 클릭하고 책 페이지를 촬영하거나 선택하면
Then Supabase Storage에 사진이 업로드되고
When 업로드가 완료되면
Then PostgreSQL notes 테이블에 저장되고 해당 책의 노트로 자동 연결된다
```

---

### US-018: 메모 작성

**As a** 책을 읽는 독자  
**I want** 책에 대한 생각이나 감상을 메모로 남기고 싶다  
**So that** 나중에 책을 다시 읽을 때 내 생각을 되돌아볼 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes` (POST)
- PostgreSQL `notes` 테이블에 저장
- 타입: `memo`

**수용 기준**:
- 메모 내용 입력 (필수)
- 책 선택 (필수)
- 페이지 번호 입력 (선택)
- 태그 추가 (선택)
- PostgreSQL에 저장
- 등록 완료 메시지 표시
- 노트 목록에 추가됨

**상세 시나리오**:
```
Given 사용자가 책 상세 페이지에 있을 때
When "메모 추가" 버튼을 클릭하고 메모를 작성한 후 저장 버튼을 클릭하면
Then PostgreSQL notes 테이블에 저장되고
When 저장이 완료되면
Then 등록 완료 메시지가 표시되고 노트 목록에 추가된다
```

---

### US-019: 내 노트 목록 조회

**As a** 노트를 작성한 사용자  
**I want** 내가 작성한 노트 목록을 조회하고 싶다  
**So that** 내가 남긴 기록들을 한눈에 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes` (GET)
- PostgreSQL `notes` 테이블 조회 (userId로 필터링)
- Full-text search 인덱스 활용

**수용 기준**:
- 노트 목록 표시 (카드 또는 리스트 형태)
- 각 노트: 타입 아이콘, 내용 미리보기, 책 제목, 날짜, 썸네일 이미지
- 정렬 옵션: 최신순 (기본), 오래된순, 책 제목순, 페이지 순서순
- 필터링: 전체, 타입별 (필사/사진/메모), 책별, 날짜별, 태그별
- 본인 노트만 조회 가능

**상세 시나리오**:
```
Given 사용자가 노트 목록 페이지에 접속했을 때
When 페이지가 로드되면
Then PostgreSQL notes 테이블에서 사용자의 노트를 조회하고
When 조회가 완료되면
Then 노트 목록이 표시된다
```

---

### US-020: 책별 노트 조회

**As a** 책을 읽는 독자  
**I want** 특정 책에 대한 노트 목록을 조회하고 싶다  
**So that** 해당 책에 남긴 모든 기록을 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/books/[id]/notes` (GET)
- PostgreSQL `notes` 테이블 조회 (bookId로 필터링)

**수용 기준**:
- 책 ID로 노트 조회
- 해당 책의 노트 목록 표시
- 책 정보 표시 (제목, 저자, 표지)
- 페이지 순서대로 정렬
- 본인이 등록한 책의 노트만 조회 가능

**상세 시나리오**:
```
Given 사용자가 책 상세 페이지에 있을 때
When "노트 보기" 버튼을 클릭하면
Then PostgreSQL notes 테이블에서 해당 책의 노트를 조회하고
When 조회가 완료되면
Then 노트 목록이 페이지 순서대로 정렬되어 표시된다
```

---

### US-021: 노트 상세 조회

**As a** 노트를 작성한 사용자  
**I want** 개별 노트의 상세 정보를 조회하고 싶다  
**So that** 노트의 전체 내용과 정보를 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/[id]` (GET)
- PostgreSQL `notes` 테이블 조회

**수용 기준**:
- 노트 ID로 상세 정보 조회
- 노트 타입 표시 (필사/사진/메모)
- 노트 내용 표시
- 노트 이미지 표시 (있는 경우)
- 책 정보 표시 (제목, 저자, 표지)
- 페이지 번호 표시
- 태그 표시
- 생성일/수정일 표시
- 공유 버튼 표시
- 본인 노트만 조회 가능 (공개 노트는 모든 사용자)

**상세 시나리오**:
```
Given 사용자가 노트 목록에서 노트를 선택했을 때
When 노트를 클릭하면
Then PostgreSQL notes 테이블에서 노트 상세 정보를 조회하고
When 조회가 완료되면
Then 노트의 전체 내용과 정보가 표시된다
```

---

### US-022: 노트 수정

**As a** 노트를 작성한 사용자  
**I want** 등록된 노트 정보를 수정하고 싶다  
**So that** 내용이나 태그를 업데이트할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/[id]` (PUT)
- PostgreSQL `notes` 테이블 업데이트

**수용 기준**:
- 노트 수정 모달 열기
- 내용, 페이지, 태그, 공개 여부 수정 가능
- 이미지 교체 (선택)
- PostgreSQL 업데이트
- 변경사항 즉시 반영
- 수정 완료 메시지 표시
- 본인 노트만 수정 가능

**상세 시나리오**:
```
Given 사용자가 노트 상세 페이지에 있을 때
When 수정 버튼을 클릭하고 정보를 수정한 후 저장 버튼을 클릭하면
Then PostgreSQL notes 테이블이 업데이트되고
When 업데이트가 완료되면
Then 변경사항이 즉시 반영되고 수정 완료 메시지가 표시된다
```

---

### US-023: 노트 삭제

**As a** 노트를 작성한 사용자  
**I want** 등록된 노트를 삭제하고 싶다  
**So that** 더 이상 필요 없는 기록을 제거할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/[id]` (DELETE)
- PostgreSQL `notes` 테이블에서 삭제
- Supabase Storage에서 이미지 삭제 (있는 경우)

**수용 기준**:
- 삭제 확인 다이얼로그 표시
- 확인 시 PostgreSQL에서 삭제
- Supabase Storage에서 이미지 삭제
- 삭제 완료 메시지 표시
- 본인 노트만 삭제 가능

**상세 시나리오**:
```
Given 사용자가 노트 상세 페이지에 있을 때
When 삭제 버튼을 클릭하고 확인 다이얼로그에서 확인을 클릭하면
Then PostgreSQL notes 테이블에서 삭제되고
When 삭제가 완료되면
Then Supabase Storage에서 이미지가 삭제되고 삭제 완료 메시지가 표시된다
```

---

## 4. 기록 자동 정리

### US-024: 기록 자동 분류

**As a** 여러 책을 읽는 독자  
**I want** 작성한 필사, 사진, 메모가 해당 책으로 자동 분류되길 원한다  
**So that** 수동으로 정리하는 시간을 절약할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- 노트 작성 시 현재 선택된 책으로 자동 연결
- PostgreSQL Foreign Key 제약조건 활용

**수용 기준**:
- 노트 작성 시 현재 선택된 책으로 자동 연결
- 노트가 자동으로 해당 책의 `book_id`로 연결
- `notes` 테이블에 저장 시 자동 분류 완료
- 자동 분류 정확도 95% 이상
- 분류 오류 시 사용자가 수동으로 수정 가능
- 자동 정리 완료 시간 10초 이내

**상세 시나리오**:
```
Given 사용자가 책 A를 읽고 있을 때
When 필사를 작성하면
Then 필사가 자동으로 책 A의 노트로 분류된다
When 사용자가 책 B로 전환하여 메모를 작성하면
Then 메모가 자동으로 책 B의 노트로 분류된다
```

---

### US-025: 페이지 순서 자동 정렬

**As a** 책을 읽는 독자  
**I want** 기록이 페이지 순서대로 자동 정렬되길 원한다  
**So that** 책을 읽은 순서대로 기록을 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- PostgreSQL 쿼리에서 `ORDER BY page_number, created_at` 사용

**수용 기준**:
- 노트 조회 시 페이지 번호 기준으로 정렬
- 페이지 번호가 없는 노트는 작성 시간순으로 정렬
- 사용자가 정렬 방식을 변경할 수 있음
- 페이지 순서대로 정렬된 노트 목록 표시

**상세 시나리오**:
```
Given 사용자가 책에 여러 기록을 작성했을 때
When 책 상세 페이지를 조회하면
Then 기록이 페이지 순서대로 표시된다
When 페이지 번호가 없는 기록이 있으면
Then 해당 기록은 작성 시간순으로 정렬된다
```

---

### US-026: 기존 사진 불러오기 및 자동 분류

**As a** 기존에 사진으로 저장한 기록이 있는 독자  
**I want** 갤러리의 기존 사진을 불러와서 자동으로 책에 분류하고 싶다  
**So that** 과거에 촬영한 책 사진도 플랫폼에서 관리할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/bulk-import` (POST)
- 이미지 분석 (선택적, Gemini API 활용)
- 사용자가 수동으로 책 선택

**수용 기준**:
- 갤러리에서 여러 사진 선택
- 책 선택 (필수)
- 선택한 사진들을 일괄 업로드
- 각 사진을 노트로 저장
- 해당 책으로 자동 분류
- 업로드 완료 메시지 표시
- 생성된 노트 목록 표시

**상세 시나리오**:
```
Given 사용자가 갤러리에 책 사진이 있을 때
When "기존 사진 불러오기" 버튼을 클릭하고 여러 사진을 선택한 후 책을 선택하면
Then 선택한 사진들이 일괄 업로드되고
When 업로드가 완료되면
Then 각 사진이 노트로 저장되고 해당 책으로 자동 분류된다
```

---

## 5. 검색 기능

### US-027: 문장 단위 전체 텍스트 검색

**As a** 과거에 읽은 책의 기록을 찾고 싶은 독자  
**I want** 저장한 문장의 일부를 입력하여 검색하고 싶다  
**So that** 몇 달 전에 읽은 책의 특정 문장을 빠르게 찾을 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/search` (GET)
- PostgreSQL Full-Text Search 활용
- `to_tsvector`와 `to_tsquery` 사용

**수용 기준**:
- 검색어 입력
- PostgreSQL Full-Text Search 쿼리 실행
- 검색 결과 표시
- 관련도 순으로 정렬
- 검색 결과 목록 표시
- 각 결과: 노트 내용, 책 제목, 날짜, 페이지 번호
- 검색 응답 시간 1초 이내
- 검색 정확도 90% 이상
- 본인 노트만 검색 가능

**상세 시나리오**:
```
Given 사용자가 검색 화면에 있을 때
When 문장의 일부를 입력하면
Then PostgreSQL Full-Text Search로 검색하고
When 검색 결과가 있으면
Then 관련도 순으로 정렬하여 표시한다
```

---

### US-028: 책 제목으로 검색

**As a** 특정 책의 기록을 찾고 싶은 독자  
**I want** 책 제목으로 검색하고 싶다  
**So that** 해당 책의 모든 기록을 한 번에 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- PostgreSQL JOIN 쿼리 활용
- `books` 테이블과 `notes` 테이블 조인

**수용 기준**:
- 책 제목 입력
- `books` 테이블에서 책 검색
- 해당 책의 모든 노트 조회
- 검색 결과 목록 표시

**상세 시나리오**:
```
Given 사용자가 검색 화면에 있을 때
When 책 제목 필터를 선택하고 제목을 입력하면
Then books 테이블에서 책을 검색하고
When 검색 결과가 있으면
Then 해당 책의 모든 기록이 표시된다
```

---

### US-029: 날짜로 검색

**As a** 특정 기간에 읽은 기록을 찾고 싶은 독자  
**I want** 날짜 범위로 검색하고 싶다  
**So that** 특정 기간에 읽은 책의 기록을 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- PostgreSQL `WHERE created_at BETWEEN` 쿼리

**수용 기준**:
- 시작일 선택
- 종료일 선택
- PostgreSQL 쿼리 실행
- 해당 기간의 노트 목록 표시
- 날짜별로 그룹화하여 표시 가능

**상세 시나리오**:
```
Given 사용자가 검색 화면에 있을 때
When 날짜 필터를 선택하고 기간을 설정하면
Then PostgreSQL 쿼리가 실행되고
When 조회가 완료되면
Then 해당 기간 내의 모든 기록이 표시된다
```

---

### US-030: 태그/주제로 검색

**As a** 특정 주제의 기록을 찾고 싶은 독자  
**I want** 태그나 주제로 검색하고 싶다  
**So that** 비슷한 주제의 문장들을 모아서 볼 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- PostgreSQL 배열 검색 (`tags @> ARRAY['태그명']`)

**수용 기준**:
- 태그 목록에서 선택
- 여러 태그를 동시에 선택 가능 (AND/OR 조건)
- PostgreSQL 배열 검색 쿼리 실행
- 해당 태그가 있는 노트 목록 표시
- 태그가 없는 기록도 함께 표시할 수 있음

**상세 시나리오**:
```
Given 사용자가 검색 화면에 있을 때
When 태그 필터를 선택하고 "인생" 태그를 선택하면
Then PostgreSQL 배열 검색 쿼리가 실행되고
When 조회가 완료되면
Then "인생" 태그가 있는 모든 기록이 표시된다
```

---

### US-031: 필사 유형으로 검색

**As a** 특정 유형의 기록을 찾고 싶은 독자  
**I want** 필사, 사진, 메모 유형으로 필터링하고 싶다  
**So that** 원하는 유형의 기록만 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- PostgreSQL `WHERE type = 'quote'` 쿼리

**수용 기준**:
- 필사(quote), 사진(photo), 메모(memo) 유형으로 필터링 가능
- 여러 유형을 동시에 선택 가능
- 유형별 아이콘이 표시되어 구분이 쉬움
- PostgreSQL 쿼리 실행
- 해당 타입의 노트 목록 표시

**상세 시나리오**:
```
Given 사용자가 검색 화면에 있을 때
When "필사" 유형 필터를 선택하면
Then PostgreSQL 쿼리가 실행되고
When 조회가 완료되면
Then 필사 유형의 기록만 표시된다
```

---

### US-032: AI 기반 의미 검색 (Phase 2)

**As a** 특정 주제의 문장을 찾고 싶은 독자  
**I want** 자연어로 질문하여 의미 기반 검색을 하고 싶다  
**So that** 정확한 키워드를 모르더라도 원하는 문장을 찾을 수 있다

**우선순위**: P2 (중간)  
**MVP 포함**: ❌

**기술 구현**:
- Next.js API Route: `/api/notes/ai-search` (POST)
- Google Gemini API 활용
- 의미적 유사도 기반 검색

**수용 기준**:
- 자연어 질의 입력 (예: "인생에 대한 깨달음이 담긴 문장")
- Gemini API로 의미 분석
- 노트 내용과 의미적 유사도 계산
- 유사도 순으로 정렬하여 표시
- 의미적으로 유사한 노트 목록 표시
- 유사도 점수 표시
- 검색 응답 시간 3초 이내
- 의미적 관련도 높은 결과 제공

**상세 시나리오**:
```
Given 사용자가 검색 화면에 있을 때
When 자연어 질의를 입력하고 AI 검색 버튼을 클릭하면
Then Gemini API가 의미를 분석하고
When 분석이 완료되면
Then 노트 내용과 의미적 유사도를 계산하여 유사도 순으로 표시한다
```

---

## 6. 공유 기능

### US-033: 카드뉴스 형태로 공유

**As a** 인상 깊은 문장을 공유하고 싶은 독자  
**I want** 선택한 노트를 카드뉴스 형태로 자동 변환하고 싶다  
**So that** SNS에 바로 공유할 수 있는 예쁜 이미지를 만들 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/[id]/share` (POST)
- Canvas API 또는 서버 사이드 이미지 생성
- 다양한 템플릿 제공

**수용 기준**:
- 노트 선택
- 공유 버튼 클릭
- 템플릿 선택 (선택)
- 카드뉴스 이미지 생성
- SNS 공유 옵션 표시
- 생성된 카드뉴스 이미지 표시
- 인스타그램 공유 버튼 표시
- 카카오톡 공유 버튼 표시
- 이미지 다운로드 버튼 표시
- 공유 생성 시간 3초 이내
- 다양한 템플릿 제공 (최소 5개)
- 모바일 최적화

**지원 플랫폼**:
- 인스타그램
- 카카오톡
- 블로그 (이미지 다운로드)

**상세 시나리오**:
```
Given 사용자가 노트를 선택했을 때
When "공유" 버튼을 클릭하면
Then 템플릿 선택 화면이 표시되고
When 템플릿을 선택하면
Then 카드뉴스 이미지가 생성되고
When 생성이 완료되면
Then SNS 공유 옵션이 표시된다
```

---

### US-034: 인스타그램 공유

**As a** 인상 깊은 문장을 공유하고 싶은 독자  
**I want** 카드뉴스를 인스타그램에 바로 공유하고 싶다  
**So that** 한 번의 클릭으로 인스타그램에 게시할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 인스타그램 공유 버튼 표시
- 인스타그램 앱이 설치되어 있으면 앱으로 이동
- 웹에서는 이미지 다운로드 후 수동 업로드를 안내
- 인스타그램 스토리 크기(1080x1920)와 피드 크기(1080x1080) 지원

**상세 시나리오**:
```
Given 사용자가 카드뉴스 이미지를 생성했을 때
When "인스타그램 공유" 버튼을 클릭하면
Then 인스타그램 앱이 열리거나 이미지 다운로드가 시작된다
```

---

### US-035: 카카오톡 공유

**As a** 인상 깊은 문장을 공유하고 싶은 독자  
**I want** 카드뉴스를 카카오톡으로 공유하고 싶다  
**So that** 친구들과 쉽게 공유할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 카카오톡 공유 버튼 표시
- 카카오톡 링크 공유 API 활용
- 공유 시 책 제목과 문장이 포함됨
- 카카오톡 앱이 설치되어 있으면 앱으로 이동

**상세 시나리오**:
```
Given 사용자가 카드뉴스 이미지를 생성했을 때
When "카카오톡 공유" 버튼을 클릭하면
Then 카카오톡 공유 화면이 표시되고
When 공유할 채팅방을 선택하면
Then 이미지와 링크가 공유된다
```

---

### US-036: 블로그용 이미지 다운로드

**As a** 블로그에 글을 쓰는 독자  
**I want** 카드뉴스 이미지를 다운로드하고 싶다  
**So that** 블로그 포스트에 삽입할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 이미지 다운로드 버튼 표시
- 고해상도 이미지로 다운로드
- 다운로드한 이미지가 갤러리에 저장

**상세 시나리오**:
```
Given 사용자가 카드뉴스 이미지를 생성했을 때
When "이미지 다운로드" 버튼을 클릭하면
Then 이미지가 기기의 다운로드 폴더에 저장된다
```

---

### US-037: 공유 링크 생성

**As a** 노트를 공유하고 싶은 사용자  
**I want** 노트를 공유할 수 있는 링크를 생성하고 싶다  
**So that** 다른 사람들에게 링크로 공유할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/notes/[id]/share-link` (POST)
- PostgreSQL `shared_links` 테이블에 공유 정보 저장
- 공유 링크 URL 생성: `/shared/[linkId]`

**수용 기준**:
- 노트 상세 페이지에서 "공유하기" 버튼 클릭
- PostgreSQL에 공유 정보 저장
- 공유 링크 URL 생성
- 링크 복사 기능 제공
- 공유 링크 URL 표시
- 링크 복사 버튼 표시
- 만료 시간 안내 (30일)
- 본인 노트만 공유 가능

**상세 시나리오**:
```
Given 사용자가 노트 상세 페이지에 있을 때
When "공유하기" 버튼을 클릭하면
Then PostgreSQL shared_links 테이블에 공유 정보가 저장되고
When 저장이 완료되면
Then 공유 링크 URL이 생성되고 링크 복사 기능이 제공된다
```

---

### US-038: 공유 링크 조회

**As a** 공유 링크를 받은 사용자  
**I want** 공유 링크를 통해 노트를 조회하고 싶다  
**So that** 로그인 없이도 노트를 볼 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js 페이지: `/shared/[linkId]`
- PostgreSQL `shared_links` 테이블 조회

**수용 기준**:
- 링크 ID로 `shared_links` 테이블 조회
- 만료 시간 확인
- 만료되지 않았으면 노트 정보 표시
- 만료되었으면 만료 메시지 표시
- 책 표지 이미지 표시
- 책 제목, 저자 표시
- 노트 이미지 표시 (있는 경우)
- 노트 내용 표시
- 노트 날짜, 페이지 표시
- 로그인 불필요

**에러 처리**:
- 링크 없음: "존재하지 않는 링크입니다"
- 링크 만료: "만료된 링크입니다"

**상세 시나리오**:
```
Given 사용자가 공유 링크를 받았을 때
When 링크를 클릭하면
Then shared_links 테이블에서 링크 정보를 조회하고
When 링크가 유효하면
Then 노트 정보가 표시된다
When 링크가 만료되었으면
Then 만료 메시지가 표시된다
```

---

## 7. 독서 타임라인

### US-039: 시간순 독서 기록 조회

**As a** 자신의 독서 히스토리를 확인하고 싶은 독자  
**I want** 시간순으로 정리된 독서 기록을 한눈에 보고 싶다  
**So that** 내가 얼마나 읽었는지, 어떤 책을 읽었는지 확인할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/timeline` (GET)
- PostgreSQL 쿼리: `ORDER BY created_at DESC`
- 무한 스크롤 구현

**수용 기준**:
- 타임라인 페이지 접속
- PostgreSQL에서 시간순으로 노트 조회
- 날짜별로 그룹화하여 표시
- 무한 스크롤로 이전 기록 로드
- 시간순으로 정렬된 노트 목록 표시
- 날짜별 그룹화
- 책 표지, 노트 미리보기 표시
- 타임라인 로딩 시간 3초 이내
- 모바일 반응형 지원
- 스크롤 최적화
- 본인 기록만 조회 가능

**상세 시나리오**:
```
Given 사용자가 타임라인 페이지에 접속했을 때
When 페이지가 로드되면
Then PostgreSQL에서 시간순으로 노트를 조회하고
When 조회가 완료되면
Then 최근 기록부터 시간순으로 표시되고
When 스크롤을 내리면
Then 이전 기록이 자동으로 로드된다
```

---

### US-040: 읽은 책 목록 조회

**As a** 자신의 독서 히스토리를 확인하고 싶은 독자  
**I want** 읽은 책 목록을 확인하고 싶다  
**So that** 내가 읽은 책들을 한눈에 볼 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/books` (GET)
- PostgreSQL `user_books` 테이블 조회
- `status = 'completed'` 필터링

**수용 기준**:
- 읽은 책 목록 표시
- 각 책: 표지, 제목, 저자, 완료일, 노트 수
- 책을 클릭하면 상세 페이지로 이동

**상세 시나리오**:
```
Given 사용자가 타임라인 페이지에 있을 때
When "읽은 책" 탭을 클릭하면
Then PostgreSQL user_books 테이블에서 완료된 책을 조회하고
When 조회가 완료되면
Then 읽은 책 목록이 표시된다
```

---

### US-041: 타임라인 PDF/이미지 내보내기

**As a** 독서 기록을 보관하고 싶은 독자  
**I want** 타임라인을 PDF나 이미지로 내보내고 싶다  
**So that** 오프라인으로 보관하거나 다른 곳에 공유할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ⚠️ (선택적)

**기술 구현**:
- Next.js API Route: `/api/timeline/export` (POST)
- PDF 생성 라이브러리 (예: jsPDF, Puppeteer)
- 이미지 생성 (Canvas API)

**수용 기준**:
- 내보내기 형식 선택 (PDF/이미지)
- 기간 선택 (선택)
- 타임라인 데이터 조회
- PDF 또는 이미지 생성
- 다운로드 제공
- 생성된 PDF 또는 이미지 파일 표시
- 다운로드 링크 제공
- 내보내기 시간 10초 이내
- 고해상도 이미지 제공

**상세 시나리오**:
```
Given 사용자가 타임라인 페이지에 있을 때
When "내보내기" 버튼을 클릭하고 형식을 선택하면
Then 타임라인 데이터를 조회하고
When 조회가 완료되면
Then PDF 또는 이미지가 생성되고
When 생성이 완료되면
Then 다운로드 링크가 제공된다
```

---

## 8. 독서모임 기능

### US-042: 독서모임 생성

**As a** 독서모임 운영자  
**I want** 독서모임을 생성하고 싶다  
**So that** 구성원들과 함께 책을 읽고 기록을 공유할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups` (POST)
- PostgreSQL `reading_groups` 테이블에 저장
- 생성자를 모임 리더로 설정

**수용 기준**:
- 모임 이름 입력 (필수, 최대 50자)
- 모임 설명 입력 (선택, 최대 500자)
- 모임 이미지 업로드 (선택)
- PostgreSQL에 저장
- 생성자를 모임 리더로 설정
- 생성자를 모임 멤버로 추가 (`group_members` 테이블)
- 모임 생성 완료 메시지 표시
- 모임 상세 페이지로 이동
- 모임 생성 시간 1분 이내

**상세 시나리오**:
```
Given 사용자가 독서모임 페이지에 있을 때
When "모임 만들기" 버튼을 클릭하고 모임 정보를 입력한 후 생성하면
Then PostgreSQL reading_groups 테이블에 저장되고
When 저장이 완료되면
Then 생성자가 모임 리더로 설정되고 모임 멤버로 추가되며 모임 상세 페이지로 이동한다
```

---

### US-043: 독서모임 목록 조회

**As a** 독서모임에 참여하고 싶은 사용자  
**I want** 참여 중인 독서모임 목록을 조회하고 싶다  
**So that** 내가 속한 모임들을 확인할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups` (GET)
- PostgreSQL `reading_groups`와 `group_members` 조인

**수용 기준**:
- 모임 목록 표시
- 각 모임: 모임명, 설명, 멤버 수, 생성일
- 모임을 클릭하면 상세 페이지로 이동

**상세 시나리오**:
```
Given 사용자가 독서모임 페이지에 접속했을 때
When 페이지가 로드되면
Then PostgreSQL에서 사용자가 참여 중인 모임을 조회하고
When 조회가 완료되면
Then 모임 목록이 표시된다
```

---

### US-044: 독서모임 상세 정보

**As a** 독서모임 멤버  
**I want** 모임의 상세 정보를 조회하고 싶다  
**So that** 모임의 활동과 구성원을 확인할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]` (GET)
- PostgreSQL 조인 쿼리

**수용 기준**:
- 모임 기본 정보 표시 (이름, 설명, 이미지)
- 멤버 목록 표시
- 모임 활동 내역 표시
- 읽는 책 리스트 표시
- 모임 멤버만 조회 가능

**상세 시나리오**:
```
Given 사용자가 모임 목록에서 모임을 선택했을 때
When 모임을 클릭하면
Then PostgreSQL에서 모임 상세 정보를 조회하고
When 조회가 완료되면
Then 모임 정보, 멤버 목록, 활동 내역, 읽는 책 리스트가 표시된다
```

---

### US-045: 모임 멤버 초대

**As a** 독서모임 운영자  
**I want** 모임에 새 멤버를 초대하고 싶다  
**So that** 모임 구성원을 늘릴 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]/members` (POST)
- 초대 링크 생성 또는 이메일 초대

**수용 기준**:
- 초대할 사용자 이메일 또는 사용자 ID 입력
- 또는 초대 링크 생성
- 사용자 존재 확인
- `group_members` 테이블에 추가
- 초대 완료 메시지 표시
- 초대 링크 표시 (생성한 경우)
- 모임 리더만 초대 가능

**상세 시나리오**:
```
Given 독서모임 운영자가 모임 상세 페이지에 있을 때
When "멤버 초대" 버튼을 클릭하고 사용자 정보를 입력하거나 초대 링크를 생성하면
Then group_members 테이블에 멤버가 추가되고
When 추가가 완료되면
Then 초대 완료 메시지가 표시된다
```

---

### US-046: 모임 멤버 제거

**As a** 독서모임 운영자  
**I want** 모임에서 멤버를 제거하고 싶다  
**So that** 모임을 관리할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]/members/[userId]` (DELETE)

**수용 기준**:
- 제거할 멤버 선택
- 확인 다이얼로그 표시
- 확인 시 `group_members` 테이블에서 제거
- 제거 완료 메시지 표시
- 모임 리더만 제거 가능

**상세 시나리오**:
```
Given 독서모임 운영자가 모임 상세 페이지에 있을 때
When 멤버 목록에서 제거할 멤버를 선택하고 확인 다이얼로그에서 확인을 클릭하면
Then group_members 테이블에서 멤버가 제거되고
When 제거가 완료되면
Then 제거 완료 메시지가 표시된다
```

---

### US-047: 모임에서 읽는 책 추가

**As a** 독서모임 운영자  
**I want** 모임에서 읽을 책을 추가하고 싶다  
**So that** 구성원들이 함께 읽을 책을 정할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]/books` (POST)
- PostgreSQL `group_books` 테이블에 저장

**수용 기준**:
- 책 검색 및 선택
- 읽기 기간 설정 (선택)
- `group_books` 테이블에 저장
- 모임 구성원들에게 표시
- 책 추가 완료 메시지 표시
- 모임 책 리스트에 추가됨
- 모임 리더만 추가 가능

**상세 시나리오**:
```
Given 독서모임 운영자가 모임 상세 페이지에 있을 때
When "책 추가" 버튼을 클릭하고 책을 검색하여 선택한 후 추가하면
Then group_books 테이블에 저장되고
When 저장이 완료되면
Then 책이 모임 책 리스트에 추가되고 구성원들에게 표시된다
```

---

### US-048: 모임에서 읽는 책 목록 조회

**As a** 독서모임 멤버  
**I want** 모임에서 읽는 책 목록을 조회하고 싶다  
**So that** 함께 읽을 책들을 확인할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- PostgreSQL `group_books`와 `books` 조인

**수용 기준**:
- 모임 책 목록 표시
- 각 책: 표지, 제목, 저자, 읽기 기간
- 모임 멤버만 조회 가능

**상세 시나리오**:
```
Given 사용자가 모임 상세 페이지에 있을 때
When "읽는 책" 탭을 클릭하면
Then PostgreSQL에서 모임 책 목록을 조회하고
When 조회가 완료되면
Then 모임 책 목록이 표시된다
```

---

### US-049: 구성원 진행 현황 확인

**As a** 독서모임 운영자  
**I want** 구성원들의 읽기 진행 상황을 확인하고 싶다  
**So that** 누가 어디까지 읽었는지 한눈에 파악할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]/progress` (GET)
- PostgreSQL `group_activities` 테이블 조회
- Supabase Realtime으로 실시간 업데이트

**수용 기준**:
- 구성원별 읽기 진행률 표시
- 구성원별 노트 수 표시
- 최근 활동 내역 표시
- 실시간 진행 현황 업데이트 (Supabase Realtime 활용)
- 모임 멤버만 조회 가능

**상세 시나리오**:
```
Given 독서모임 운영자가 모임 대시보드에 있을 때
When "진행 현황" 탭을 클릭하면
Then PostgreSQL에서 구성원들의 진행 현황을 조회하고
When 조회가 완료되면
Then 구성원별 읽기 진행률과 노트 수가 표시되고
When 구성원이 읽기 진행률을 업데이트하면
Then 실시간으로 화면에 반영된다
```

---

### US-050: 구성원 노트 공유

**As a** 독서모임 구성원  
**I want** 내 필사와 메모를 모임에 공유하고 싶다  
**So that** 다른 구성원들과 생각을 나눌 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- 노트 작성 시 "모임에 공유" 옵션 선택
- PostgreSQL `group_activities` 테이블에 저장
- Supabase Realtime으로 실시간 피드 업데이트

**수용 기준**:
- 노트 작성 시 "모임에 공유" 옵션 선택
- `group_activities` 테이블에 저장
- 모임 피드에 표시
- 구성원들이 댓글을 남길 수 있음 (선택적)
- 모임 멤버만 공유 가능

**상세 시나리오**:
```
Given 독서모임 구성원이 필사를 작성했을 때
When "모임에 공유" 옵션을 선택하고 저장하면
Then group_activities 테이블에 저장되고
When 저장이 완료되면
Then 필사가 모임 피드에 표시되고
When 다른 구성원이 모임 피드를 조회하면
Then 공유된 필사를 볼 수 있다
```

---

### US-051: 모임 활동 요약

**As a** 독서모임 운영자  
**I want** 모임 활동 요약을 확인하고 싶다  
**So that** 모임의 활성도와 참여도를 파악할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]/summary` (GET)
- PostgreSQL 집계 쿼리

**수용 기준**:
- 주간/월간 활동 통계 표시
- 구성원별 활동 통계 표시
- 가장 많이 공유된 노트 표시
- 모임 활동 그래프 표시
- 모임 멤버만 조회 가능

**상세 시나리오**:
```
Given 독서모임 운영자가 모임 대시보드에 있을 때
When "활동 요약" 탭을 클릭하면
Then PostgreSQL에서 모임 활동 통계를 조회하고
When 조회가 완료되면
Then 주간/월간 활동 통계, 구성원별 활동 통계, 가장 많이 공유된 노트가 표시된다
```

---

### US-052: 모임 설정 변경

**As a** 독서모임 운영자  
**I want** 모임 정보를 수정하고 싶다  
**So that** 모임 정보를 업데이트할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]` (PUT)
- PostgreSQL `reading_groups` 테이블 업데이트

**수용 기준**:
- 모임명 수정
- 모임 설명 수정
- 모임 이미지 수정
- PostgreSQL 업데이트
- 변경사항 즉시 반영
- 모임 리더만 수정 가능

**상세 시나리오**:
```
Given 독서모임 운영자가 모임 상세 페이지에 있을 때
When "설정 변경" 버튼을 클릭하고 정보를 수정한 후 저장하면
Then PostgreSQL reading_groups 테이블이 업데이트되고
When 업데이트가 완료되면
Then 변경사항이 즉시 반영된다
```

---

### US-053: 모임 삭제

**As a** 독서모임 운영자  
**I want** 모임을 삭제하고 싶다  
**So that** 더 이상 운영하지 않는 모임을 정리할 수 있다

**우선순위**: P1 (높음)  
**MVP 포함**: ✅

**기술 구현**:
- Next.js API Route: `/api/groups/[id]` (DELETE)
- PostgreSQL CASCADE 삭제

**수용 기준**:
- 삭제 확인 다이얼로그 표시
- 확인 시 모임 삭제
- 관련 데이터 정리 (CASCADE)
- 모임 리더만 삭제 가능

**상세 시나리오**:
```
Given 독서모임 운영자가 모임 상세 페이지에 있을 때
When "모임 삭제" 버튼을 클릭하고 확인 다이얼로그에서 확인을 클릭하면
Then PostgreSQL에서 모임이 삭제되고
When 삭제가 완료되면
Then 관련 데이터가 정리되고 삭제 완료 메시지가 표시된다
```

---

## 9. 기술적 요구사항

### US-054: 모바일 반응형 지원

**As a** 모바일에서 서비스를 사용하는 사용자  
**I want** 모바일 화면에 최적화된 UI를 보고 싶다  
**So that** 스마트폰에서도 편리하게 사용할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 모바일 화면(320px 이상)에서 정상 작동
- 터치 인터페이스 최적화
- 이미지 업로드 시 모바일 카메라 사용 가능
- 모바일 브라우저에서 테스트 완료
- Tailwind CSS 반응형 클래스 활용

**상세 시나리오**:
```
Given 사용자가 모바일 기기에서 서비스에 접속했을 때
When 페이지가 로드되면
Then 모바일 화면에 최적화된 레이아웃이 표시되고
When 기능을 사용하면
Then 터치 인터페이스가 최적화되어 있다
```

---

### US-055: 성능 최적화

**As a** 서비스를 사용하는 모든 사용자  
**I want** 빠른 로딩 속도와 반응성을 경험하고 싶다  
**So that** 불편함 없이 서비스를 사용할 수 있다

**우선순위**: P0 (필수)  
**MVP 포함**: ✅

**수용 기준**:
- 페이지 로딩 시간 3초 이내
- 이미지 최적화 및 지연 로딩 적용
- API 응답 시간 1초 이내
- Vercel Analytics로 성능 모니터링
- 코드 스플리팅 및 번들 최적화
- 데이터 캐싱 (React Query 또는 SWR)
- Next.js Image 컴포넌트 활용

**상세 시나리오**:
```
Given 사용자가 페이지에 접속했을 때
When 페이지가 로드되면
Then 3초 이내에 페이지가 표시되고
When API를 호출하면
Then 1초 이내에 응답이 반환된다
```

---

## 우선순위 요약

### P0 (필수) - MVP 포함
- US-001 ~ US-041, US-054, US-055

### P1 (높음) - MVP 포함
- US-042 ~ US-053

### P2 (중간) - Phase 2
- US-032

---

## 참고사항

- 각 사용자 스토리는 독립적으로 개발 및 테스트 가능해야 합니다
- 수용 기준은 명확하고 측정 가능해야 합니다
- 사용자 스토리는 실제 사용자 피드백을 바탕으로 지속적으로 개선됩니다
- 기술적 제약사항이 있을 경우 우선순위를 조정할 수 있습니다
- 모든 기능은 Supabase와 Vercel 기반으로 구현됩니다

---

**문서 승인**

| 역할 | 이름 | 날짜 | 서명 |
|------|------|------|------|
| 제품 관리자 | | | |
| 기술 리더 | | | |
| 디자인 리더 | | | |

---

© 2025 Readtree by Habitree. 모든 권리 보유

